(()=>{"use strict";const e=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};let t=[];null===localStorage.getItem("idArray")?localStorage.setItem("idArray",JSON.stringify([])):t=JSON.parse(localStorage.getItem("idArray"));let r=JSON.parse(localStorage.getItem("cardArray"));document.querySelector(".projects");const l=l=>{const o=document.querySelector(".projectTitle");if(""==document.querySelector("#title").value)alert("Please Enter a ToDo Title");else{let n=(()=>{const e=document.createElement("div");e.setAttribute("class","card todoCard"),e.setAttribute("style","margin-top: 3px;");const t=document.createElement("div");t.setAttribute("class","card-header text-start fw-bold card-tit-change"),t.setAttribute("style","width: 100%;");const r=document.querySelector(".todo-form-form"),l=document.createElement("div");l.innerText=`${r.title.value}________ `,t.appendChild(l);const o=document.createElement("span");o.setAttribute("class","text-end fw-bold card-dat-change");const n=document.querySelector(".todo-form-form");o.innerText=`Due Date: ${n.date.value}`;const c=document.createElement("span");c.setAttribute("class","text-end fw-bold card-dat-change");const a=document.querySelector(".todo-form-form");c.innerText=`Description: ${a.description.value}`;const i=document.createElement("div");i.setAttribute("class","card-body d-flex justify-content-end");const d=document.createElement("button");d.setAttribute("class","btn btn-secondary"),d.setAttribute("data-bs-toggle","modal"),d.setAttribute("data-bs-target","#exampleModal"),d.innerText="Edit To-Do";const s=document.createElement("button");return s.setAttribute("class","btn btn-warning"),s.innerText="Delete ToDo",i.appendChild(d),i.appendChild(s),t.appendChild(o),t.appendChild(i),t.appendChild(c),e.appendChild(t),e})();const c=document.querySelector("#result");if(""==c.value)return void alert("Please Select a Priority ");1==c.value?n.style.backgroundColor="red":2==c.value?n.style.backgroundColor="yellow":3==c.value?n.style.backgroundColor="lightblue":n.style.backgroundColor="lightcyan",n.setAttribute("id",0);for(let e=0;e<t.length;e++)if(t[e]==n.id){const r=parseInt(t[e]);n.setAttribute("id",r+1)}const a=document.querySelector("#idButt"),i=document.querySelector(".deleteButton"),d=function(e){a.value=e.target.id,i.setAttribute("id",e.target.id)};t.push(n.id),n.children[0].children[2].firstChild.setAttribute("id",n.id),n.children[0].children[2].firstChild.addEventListener("click",d),n.children[0].children[2].children[1].setAttribute("id",n.id),localStorage.setItem("idArray",JSON.stringify(t)),n=n.outerHTML;const s=JSON.stringify(n);r=JSON.parse(localStorage.getItem("cardArray")),"Project: &nbsp; All ToDos"==o.innerHTML?r.push(s):r[parseInt(l.target.id)].push(s),localStorage.setItem("cardArray",JSON.stringify(r));const u=document.querySelector(".toDos"),g=document.createElement("div");g.setAttribute("class","toDoList");let y=[];if(r=JSON.parse(localStorage.getItem("cardArray")),"Project: &nbsp; All ToDos"==o.innerHTML)for(let e=0;e<r.length;e++)for(let t=0;t<r[e].length;t++){localStorage.setItem("innerArray",JSON.stringify(r[e][t]));try{y=JSON.parse(r[e][t])}catch(l){t=r[e].length-1,y=JSON.parse(r[e])}g.innerHTML+=y}else for(let e=0;e<r[parseInt(l.target.id)].length;e++)g.innerHTML+=JSON.parse(r[parseInt(l.target.id)][e]);null==u.firstChild||e(u),u.appendChild(g),localStorage.setItem("cardArray[parseInt(elem.target.id)]",JSON.stringify(r[parseInt(l.target.id)])),localStorage.setItem("cardArray",JSON.stringify(r));const m=()=>{document.querySelector(".confirmDelete").style.display="block"};if(r=JSON.parse(localStorage.getItem("cardArray")),null==g.firstChild){let e=1;e+=1}else{const e=g.children;for(let t=0;t<e.length;t++)e[t].addEventListener("click",d),e[t].children[0].children[2].children[1].addEventListener("click",m)}}},o=()=>{let e=JSON.parse(localStorage.getItem("cardArray"));const t=document.createElement("div");t.setAttribute("class","card card2"),t.setAttribute("style","margin-top: 5px;");const r=document.createElement("div");r.setAttribute("class","card3 card-header text-center fw-bold");const l=document.querySelector("#projectName");return r.innerHTML=`Project:  <span class='text-primary'>${l.value}`,t.appendChild(r),null===localStorage.getItem("cardArray")?localStorage.setItem("cardArray",JSON.stringify(e)):e=JSON.parse(localStorage.getItem("cardArray")),t.setAttribute("id",e.length),{card:t,cardArray:e}},n=function(e){const t=document.querySelector("#right-section"),r=document.createElement("h3");r.setAttribute("class","projectTitle"),r.innerText=e;const l=document.querySelector(".projectTitle");t.replaceChild(r,l)};let c=[];null===localStorage.getItem("cardArray")?localStorage.setItem("cardArray",JSON.stringify([])):c=JSON.parse(localStorage.getItem("cardArray"));const a=function(){document.querySelector(".butt").setAttribute("id",this.parentElement.id);const t=document.querySelector(".toDos"),r=document.createElement("div");r.setAttribute("class","toDoList");const l=document.querySelector("#idButt"),o=document.querySelector(".deleteButton"),a=function(e){l.value=e.target.id,o.setAttribute("id",e.target.id)};let i=[];console.log("CHECK CHECK"),c=JSON.parse(localStorage.getItem("cardArray"));for(let e=0;e<c[this.parentElement.id].length;e++)i=JSON.parse(c[this.parentElement.id][e]),r.innerHTML+=i;if(null==t.firstChild)return;e(t),t.appendChild(r);const d=()=>{document.querySelector(".confirmDelete").style.display="block"};if(localStorage.setItem("cardArray[parseInt(elem.target.id)]",JSON.stringify(c[parseInt(this.parentElement.id)])),localStorage.setItem("cardArray",JSON.stringify(c)),n(this.innerText),null==r.firstChild);else{const e=r.children;for(let t=0;t<e.length;t++)e[t].addEventListener("click",a),e[t].children[0].children[2].children[1].addEventListener("click",d)}},i=document.querySelector(".projects");let d=[];null===localStorage.getItem("cardArray")?localStorage.setItem("cardArray",JSON.stringify([])):d=JSON.parse(localStorage.getItem("cardArray"));let s=[];null===localStorage.getItem("projArray")?localStorage.setItem("projArray",JSON.stringify([])):s=JSON.parse(localStorage.getItem("projArray"));let u=[];null===localStorage.getItem("cardArray")?localStorage.setItem("cardArray",JSON.stringify([])):u=JSON.parse(localStorage.getItem("cardArray")),document.querySelector(".butt");const g=function(){document.querySelector(".butt").setAttribute("id",this.id);const t=document.querySelector(".toDos"),r=document.createElement("div");r.setAttribute("class","toDoList");const l=document.querySelector("#idButt"),o=document.querySelector(".deleteButton"),c=function(e){l.value=e.target.id,o.setAttribute("id",e.target.id)};let a=[];if(u=JSON.parse(localStorage.getItem("cardArray")),Array.isArray(u[this.id]))for(let e=0;e<u[this.id].length;e++)a+=JSON.parse(u[this.id][e]);else a=JSON.parse(u[this.id]);if(r.innerHTML+=a,null==t.firstChild)return;e(t),t.appendChild(r),localStorage.setItem("cardArray[parseInt(elem.target.id)]",JSON.stringify(u[parseInt(this.id)])),localStorage.setItem("cardArray",JSON.stringify(u));const i=()=>{document.querySelector(".confirmDelete").style.display="block"};if(n(this.innerText),null==r.firstChild);else{const e=r.children;for(let t=0;t<e.length;t+=1)e[t].addEventListener("click",c),e[t].children[0].children[2].children[1].addEventListener("click",i)}};let y=[];null===localStorage.getItem("cardArray")?localStorage.setItem("cardArray",JSON.stringify([])):y=JSON.parse(localStorage.getItem("cardArray"));let m=[];null===localStorage.getItem("projArray")?localStorage.setItem("projArray",JSON.stringify([])):m=JSON.parse(localStorage.getItem("projArray"));let S=[];null===localStorage.getItem("cardArray")?localStorage.setItem("cardArray",JSON.stringify([])):S=JSON.parse(localStorage.getItem("cardArray"));let p=null;null===localStorage.getItem("projArray")?localStorage.setItem("projArray",JSON.stringify([])):JSON.parse(localStorage.getItem("projArray")),function(){const t=document.querySelector(".projects"),r=document.querySelector(".toDos"),l=document.createElement("div");l.setAttribute("class","toDoList");const o=document.createElement("div");o.setAttribute("class","projList");let n=[];y=JSON.parse(localStorage.getItem("cardArray"));for(let e=0;e<y.length;e++)for(let t=0;t<y[e].length;t++){localStorage.setItem("innerArray",JSON.stringify(y[e][t]));try{n=JSON.parse(y[e][t])}catch(r){t=y[e].length-1,n=JSON.parse(y[e])}l.innerHTML+=n}if(null==r.firstChild)return;e(r),r.appendChild(l);const c=document.querySelector("#idButt"),a=document.querySelector(".deleteButton"),i=function(e){c.value=e.target.id,a.setAttribute("id",e.target.id)};m=JSON.parse(localStorage.getItem("projArray"));let d="";for(let e=0;e<m.length;e++)d=JSON.parse(m[e]),o.innerHTML+=d;const s=o.children;for(let e=0;e<s.length;e++)s[e].addEventListener("click",g);t.appendChild(o);const u=()=>{document.querySelector(".confirmDelete").style.display="block"};if(null==l.firstChild);else{const e=l.children;for(let t=0;t<e.length;t++)e[t].addEventListener("click",i),e[t].children[0].children[2].children[1].addEventListener("click",u)}}(),document.querySelector(".projects");const h=e=>{const t=e.target.value;document.getElementById("result").value=t},f=e=>{const t=e.target.value;document.getElementById("result2").value=t},A=document.querySelector("#one"),v=document.querySelector("#two"),N=document.querySelector("#three"),I=document.querySelector("#four");A.addEventListener("click",h),v.addEventListener("click",h),N.addEventListener("click",h),I.addEventListener("click",h);const J=document.querySelector("#one1"),O=document.querySelector("#two2"),b=document.querySelector("#three3"),E=document.querySelector("#four4");J.addEventListener("click",f),O.addEventListener("click",f),b.addEventListener("click",f),E.addEventListener("click",f),document.querySelector("#button1").addEventListener("click",(()=>{if(""==document.querySelector("#projectName").value)return void alert("Please Enter a Project Title");s=JSON.parse(localStorage.getItem("projArray"));let e=o().card;e=e.outerHTML;const t=JSON.stringify(e);s.push(t),localStorage.setItem("projArray",JSON.stringify(s)),i.appendChild(o().card),d=JSON.parse(localStorage.getItem("cardArray")),d.push([]),localStorage.setItem("cardArray",JSON.stringify(d)),document.querySelectorAll(".card3").forEach((function(e){e.addEventListener("click",a)}))})),document.querySelector(".butt").addEventListener("click",(e=>{l(e)})),document.querySelector(".all").addEventListener("click",(function(){const t=document.querySelector(".toDos"),r=document.createElement("div");r.setAttribute("class","toDoList");let l=[];S=JSON.parse(localStorage.getItem("cardArray"));for(let e=0;e<S.length;e++)for(let t=0;t<S[e].length;t++){localStorage.setItem("innerArray",JSON.stringify(S[e][t]));try{l=JSON.parse(S[e][t])}catch(r){t=S[e].length-1,l=JSON.parse(S[e])}r.innerHTML+=l}if(null==t.firstChild)return;e(t),t.appendChild(r),localStorage.setItem("cardArray[parseInt(elem.target.id)]",JSON.stringify(S[parseInt(this.parentElement.id)])),localStorage.setItem("cardArray",JSON.stringify(S)),n(this.innerText);const o=document.querySelector("#idButt"),c=function(e){o.value=e.target.id};if(null==r.firstChild);else{const e=r.children;for(let t=0;t<e.length;t++)e[t].addEventListener("click",c)}})),document.querySelector(".editButt").addEventListener("click",(e=>{const t=document.querySelector("#idButt"),r=document.querySelector("#title2"),l=document.querySelector("#date2"),o=document.querySelector("#description2"),n=document.querySelector("#result2");let c=JSON.parse(localStorage.getItem("cardArray"));const a=document.getElementsByClassName("todoCard"),i=document.createElement("div");document.querySelector(".butt"),document.querySelector("#idButt");for(let e=0;e<a.length;e++){const d=a[e].children[0].children;if(a[e].id==t.value){""==r.value?r.value="":d[0].innerText=r.value,""==l.value?l.value:d[1].innerText=l.value,""==o.value?o.value:d[3].innerText=o.value,""==n.value?n.value:1==n.value?a[e].style.backgroundColor="red":2==n.value?a[e].style.backgroundColor="yellow":3==n.value?a[e].style.backgroundColor="lightblue":a[e].style.backgroundColor="lightcyan";const t=a[e].outerHTML,s=JSON.stringify(t);for(let t=0;t<c.length;t+=1)if(Array.isArray(c[t]))for(let r=0;r<c[t].length;r+=1)i.innerHTML=JSON.parse(c[t][r]),i.firstChild.id==a[e].id&&(console.log("CHECK CHECK"),c[t][r]=s);else console.log(c),console.log("RANN"),c[t].id==a[e].id&&(c[t]=s);localStorage.setItem("cardArray",JSON.stringify(c))}}})),document.querySelector(".deleteButton").addEventListener("click",(e=>{const t=document.querySelector("#idButt");let r=JSON.parse(localStorage.getItem("cardArray"));const l=document.getElementsByClassName("todoCard"),o=document.createElement("div");for(let e=0;e<l.length;e++){if(l[e].children[0].children,console.log("title "+l[e].id),console.log("dvall "+t.value),l[e].id==t.value){l[e].style.display="none";const t=l[e].outerHTML,n=JSON.stringify(t);for(let t=0;t<r.length;t+=1)if(Array.isArray(r[t]))for(let c=0;c<r[t].length;c+=1)o.innerHTML=JSON.parse(r[t][c]),o.firstChild.id==l[e].id&&(console.log("CHECK CHECK"),r[t][c]=n);else console.log("RANN"),o.innerHTML=JSON.parse(r[t]),o.firstChild.id==l[e].id&&(r[t]=n);localStorage.setItem("cardArray",JSON.stringify(r))}console.log("Crash"),console.log(l.length),document.querySelector(".confirmDelete").style.display="none"}})),document.querySelector(".deleteButton2").addEventListener("click",(()=>{document.querySelector(".confirmDelete").style.display="none"}))})();